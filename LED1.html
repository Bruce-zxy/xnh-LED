<!DOCTYPE html>
<html lang="en">
<!------分------割------线------>
<head>

    <meta charset="UTF-8">
    <meta name="Author" content="Bruce Zhu">
	<meta http-equiv="pragma" content="no-cache">
    <title>LED大屏幕</title>
    <link rel="stylesheet" type="text/css" href="./css/clock.css" />
    <style type="text/css">
	
		html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
		body { background-color: rgba(0, 0, 0, .95); background-size: 100% 100%; }
		.banner { width: 100%; height: 40%; background-image: url('../img/LED6.png'); background-repeat: no-repeat; background-position: 50% 50%; background-size: cover; }
		.time { font-size: 42px; display: inline-block; float: left; width: 75%; height: 15%; color: yellow; }
		.time p { height: 50%; margin: 0; padding: 20px 20px 0; }
		.time hr { width: 95%; }
		.parking_lot { font-size: 46px; float: left; box-sizing: border-box; width: 75%; height: 25%; margin: 0; padding: 0 20px; }
		.parking_lot > span:first-child { display: block; height: 50%; color: #0f0; }
		.parking_lot > span:last-child { display: block; height: 50%; color: red; }
		.parking_lot > span span:first-child { display: inline-block; width: 40%; text-align: right; }
		.clock_mask { display: inline-block; float: right; box-sizing: border-box; width: 25%; height: 40%; padding: 20px 0; }
		.fill { height: 100%; margin: 0 auto; border-radius: 50%; background-color: rgba(0, 0, 0, .6); }
		.greet { font-size: 64px; overflow: hidden; box-sizing: border-box; width: 100%; height: 20%; margin: 0; text-align: center; color: yellow; border: 2px dotted yellow; outline: none; }

    </style>
</head>
<!------分------割------线------>

<body>

	<div class="banner"></div>

	<div class="time">
		<p class="yl"></p>
		<hr>
	</div>

	<div class="clock_mask">
	    <div class="fill">
	        <div class="reference"></div>
	        <div class="clock" id="utility-clock">
	            <div class="centre">
	                <div class="dynamic"></div>
	                <div class="expand round circle-1"></div>
	                <div class="anchor hour">
	                    <div class="element thin-hand"></div>
	                    <div class="element fat-hand"></div>
	                </div>
	                <div class="anchor minute">
	                    <div class="element thin-hand"></div>
	                    <div class="element fat-hand minute-hand"></div>
	                </div>
	                <div class="anchor second">
	                    <div class="element second-hand"></div>
	                </div>
	                <div class="expand round circle-2"></div>
	                <div class="expand round circle-3"></div>
	            </div>
	        </div>
	    </div>
    </div>
    <p class="parking_lot">
    	<span><span>可用车位：</span><span class="useable">552</span></span>
    	<span><span>总车位：</span><span class="all">579</span></span>
    </p>
    <p class="greet" contenteditable="true">欢迎各位游客！文明旅游，从我做起！</p>

</body>

<script type="text/javascript" src="./js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="./js/calendar.js"></script>
<script type="text/javascript" src="./js/clock.js"></script>
<script type="text/javascript">

	localStorage.getItem('.greet') ? $('.greet').html(localStorage.getItem('.greet')) : null;
	function fontAdapt(name) {
		var ele = $(name);
		var reg = /\d+/ig;
		var tempHTML = ele.html();
		var checkEleChange = function () {
			ele.html() !== tempHTML ? changeEle() : null;
			tempHTML = ele.html();
			requestAnimationFrame(checkEleChange);
		}
		var changeEle = function () {
			var eleSize = ele.css("font-size").match(reg)[0];
			var eleLen = ele.html().length;
			var eleWidth = ele.width();
			var eleHeight = ele.height();
			var eleSizeWidth = eleSize * eleLen;
			ele.css("font-size", eleWidth/(eleLen + 1));
			eleHeight < eleWidth/(eleLen + 1) ? ele.css("font-size", eleHeight) : null; 
			ele.css("line-height", eleHeight+"px");
			localStorage.setItem(name, ele.html());
		}
		changeEle();
		checkEleChange();
		window.addEventListener('resize', changeEle);
	}
	/**
	 *  lunar.cYear 2017
	 *  lunar.cMonth 12
	 *  lunar.cDay 06
	 *  lunar.astro 星座
	 *  lunar.lYear 农历2017
	 *  lunar.IMonthCn 腊月
	 *  lunar.IDayCn 初九
	 *  lunar.gzYear 丁酉
	 *  lunar.gzMonth 辛亥
	 *  lunar.gzDay 丁卯
	 *  lunar.Animal 生肖
	 *  lunar.jieqi 二十四节气
	 */
	var lunar = calendar.solar2lunar();
	var yl = lunar.cYear + '年' + lunar.cMonth + '月' + lunar.cDay + '日';
	var nl = '农历' + lunar.IMonthCn + lunar.IDayCn;
	var jq = lunar.jieqi;
	$('.yl').html(yl + '&nbsp;&nbsp;&nbsp;&nbsp;' + nl);
	$('.yl').css("line-height", $('.yl').height() + 'px');

	$('.fill').width($('.fill').height());
	window.addEventListener('resize', function () {
		$('.fill').width($('.fill').height());
	})

	fontAdapt('.greet');

</script>
<!------分------割------线------>
</html>